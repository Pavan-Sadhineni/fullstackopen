(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),a=n(18),o=n(8),u=n(3),i=n(1),s=n(5),l=n.n(s),d="http://localhost:3001/api/persons",j={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},f=n(0),b=function(e){var t=e.addNewPerson,n=Object(i.useState)(""),r=Object(u.a)(n,2),c=r[0],a=r[1],o=Object(i.useState)(""),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==c.trim()&&t({name:c,number:l})},children:[Object(f.jsxs)("div",{children:["name:"," ",Object(f.jsx)("input",{value:c,onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(f.jsxs)("div",{children:["number:"," ",Object(f.jsx)("input",{value:l,onChange:function(e){var t=e.target;return d(t.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.setFilter;return Object(f.jsx)("input",{onChange:function(e){var n=e.target;return t(n.value)}})},m=function(e){var t=e.person,n=e.handleDelete;return Object(f.jsxs)("div",{children:[t.name,": ",t.number," ",Object(f.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"Delete"})]})},O=function(e){var t=e.persons,n=e.handleDelete;return Object(f.jsx)("div",{children:t.map((function(e){return Object(f.jsx)(m,{person:e,handleDelete:n},e.id)}))})},p=function(e){var t=e.message;return t?Object(f.jsx)("div",{className:t.type,children:t.text}):null},v=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),s=Object(u.a)(c,2),l=s[0],d=s[1],m=Object(i.useState)(null),v=Object(u.a)(m,2),x=v[0],w=v[1];Object(i.useEffect)((function(){j.getAll().then((function(e){r(e)})).catch((function(e){return console.error(e)}))}),[]);var g=""===l?n:n.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(p,{message:x}),Object(f.jsx)(h,{setFilter:d}),Object(f.jsx)("h2",{children:"Add new"}),Object(f.jsx)(b,{addNewPerson:function(e){var t=n.find((function(t){return n=t.name,r=e.name,n.toLowerCase()===r.toLowerCase();var n,r}));if(t){if(window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with the new one?"))){var c=Object(o.a)(Object(o.a)({},t),{},{number:e.number});j.update(t.id,c).then((function(e){r(n.filter((function(e){return e.name!==c.name})).concat(e)),w({text:"Updated ".concat(c.name,"'s number"),type:"success"}),setTimeout((function(){return w(null)}),5e3)})).catch((function(e){w({text:"Information for ".concat(t.name," has already been removed from server"),type:"error"}),r(n.filter((function(e){return e.name!==t.name}))),setTimeout((function(){w(null)}),5e3)}))}}else j.create(e).then((function(e){r([].concat(Object(a.a)(n),[e])),w({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){return w(null)}),5e3)})).catch((function(e){w({text:e.response.data.error,type:"error"}),setTimeout((function(){return w(null)}),5e3),console.error(e)}))}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{persons:g,handleDelete:function(e,t){window.confirm("Are you sure you want to delete ".concat(t,"?"))&&(j.deletePerson(e),r(n.filter((function(t){return t.id!==e}))))}})]})};n(42);c.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.af12e6df.chunk.js.map