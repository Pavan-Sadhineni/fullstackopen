{"version":3,"sources":["services/blogs.js","components/Blog.js","services/login.js","components/Notification.js","components/Togglable.js","App.js","index.js"],"names":["baseUrl","token","getAll","axios","get","then","response","data","setToken","newToken","create","newObject","a","config","headers","Authorization","post","update","id","updatedObject","put","deleteBlog","delete","Blog","blog","blogs","setBlogs","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","useState","flag","setFlag","style","title","onClick","url","likes","event","foundBlog","find","b","updatedBlog","blogService","returnedBlog","map","sort","updateLikeCount","author","name","window","confirm","filter","p","className","login","credentials","Notification","message","errorState","Togglable","props","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","buttonLabel","children","NewNote","createBlog","setTitle","setAuthor","setUrl","onSubmit","preventDefault","value","onChange","target","type","App","username","setUsername","password","setPassword","user","setUser","setMessage","setErrorState","useEffect","loggedUserJSON","localStorage","getItem","JSON","parse","handleLogin","loginService","setItem","stringify","setTimeout","removeItem","newBlogObj","concat","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ecf79a99.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = (id, updatedObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, updatedObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteBlog = id => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  const request = axios.delete(`${baseUrl}/${id}`, config)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, setToken, create, update, deleteBlog }","import React, { useState } from 'react'\r\nimport blogService from '../services/blogs'\r\n\r\nconst Blog = ({ blog, blogs, setBlogs }) => {\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const [flag, setFlag] = useState(false)\r\n  const showDetails = () => setFlag(true)\r\n  const hideDetails = () => setFlag(false)\r\n\r\n  const updateLikeCount = (event, id) => {\r\n    const foundBlog = blogs.find(b => b.id === id)\r\n    const updatedBlog = { ...foundBlog, likes: foundBlog.likes + 1 }\r\n\r\n    blogService.update(id, updatedBlog).then(returnedBlog => {\r\n      setBlogs(blogs.map(b => b.id !== id ? b : returnedBlog).sort((a, b) => b.likes - a.likes))\r\n    })\r\n\r\n  }\r\n\r\n  const removeBlog = (event, id, name, author) => {\r\n    if (window.confirm(`Remove blog ${name} by ${author}?`)) {\r\n      blogService.deleteBlog(id).then(response => {\r\n        setBlogs(blogs.filter(p => p.id !== id).sort((a, b) => b.likes - a.likes))\r\n      })\r\n    }\r\n  }\r\n\r\n  if (!flag) {\r\n    return (\r\n      <div style={blogStyle} className=\"blog-default\">\r\n        <div className=\"blog\">\r\n          {blog.title} {blog.author} &nbsp; <button onClick={showDetails}>view</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div style={blogStyle}>\r\n        <div>{blog.title} &nbsp; <button onClick={hideDetails}>hide</button></div>\r\n        <div>{blog.url}</div>\r\n        <div>{blog.likes}&nbsp; <button onClick={(event) => updateLikeCount(event, blog.id)}>like</button></div>\r\n        <div>{blog.author}</div>\r\n        <button onClick={(event) => removeBlog(event, blog.id, blog.title, blog.author)}>remove</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default Blog","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/login'\r\n\r\nconst login = async credentials => {\r\n    const response = await axios.post(baseUrl, credentials)\r\n    return response.data\r\n}\r\n\r\nexport default { login }","import React from 'react'\r\n\r\nconst Notification = ({ message, errorState }) => {\r\n    if (message == null) {\r\n        return null\r\n    } else if (errorState === 'error') {\r\n        return (\r\n            <>\r\n                <div className=\"error\">{message}</div>\r\n            </>\r\n        )\r\n    } else if (errorState === 'success') {\r\n        return (\r\n            <>\r\n                <div className=\"success\">{message}</div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Notification","import React, { useState } from 'react'\r\n\r\nconst Togglable = (props) => {\r\n    const [visible, setVisible] = useState(false)\r\n\r\n    const hideWhenVisible = { display: visible ? 'none' : '' }\r\n    const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n    const toggleVisibility = () => {\r\n        setVisible(!visible)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={hideWhenVisible}>\r\n                <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n            </div>\r\n            <div style={showWhenVisible}>\r\n                {props.children}\r\n                <button onClick={toggleVisibility}>cancel</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Togglable","import React, { useState, useEffect } from 'react'\r\nimport Blog from './components/Blog'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport Notification from './components/Notification'\r\nimport Togglable from './components/Togglable'\r\nimport './index.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst NewNote = ({ createBlog }) => {\r\n  const [title, setTitle] = useState('')\r\n  const [author, setAuthor] = useState('')\r\n  const [url, setUrl] = useState('')\r\n\r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    const newBlogObj = {\r\n      author, title, url\r\n    }\r\n\r\n    createBlog(newBlogObj)\r\n    setAuthor('')\r\n    setTitle('')\r\n    setUrl('')\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>create new</h2>\r\n      <form onSubmit={addBlog}>\r\n        <div>title:<input id=\"title\" value={title} onChange={({ target }) => setTitle(target.value)} /></div>\r\n        <div>author:<input id=\"author\" value={author} onChange={({ target }) => setAuthor(target.value)} /></div>\r\n        <div>url:<input id=\"url\" value={url} onChange={({ target }) => setUrl(target.value)} /></div>\r\n        <button type=\"submit\" id=\"create-blog\">create</button>\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n\r\nNewNote.propTypes = {\r\n  createBlog: PropTypes.func.isRequired\r\n}\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [user, setUser] = useState(null)\r\n\r\n  const [message, setMessage] = useState(null)\r\n  const [errorState, setErrorState] = useState('success')\r\n\r\n  useEffect(() => {\r\n    blogService.getAll().then(blogs =>\r\n      setBlogs(blogs.sort((a, b) => b.likes - a.likes))\r\n    )\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n    try {\r\n      const user = await loginService.login({\r\n        username, password,\r\n      })\r\n\r\n      window.localStorage.setItem(\r\n        'loggedBlogAppUser', JSON.stringify(user)\r\n      )\r\n\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n    } catch (exception) {\r\n      setMessage('Wrong credentials')\r\n      setErrorState('error')\r\n      setUsername('')\r\n      setPassword('')\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n        setErrorState('success')\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    window.localStorage.removeItem('loggedBlogAppUser')\r\n    setUser(null)\r\n  }\r\n\r\n  const createBlog = (newBlogObj) => {\r\n    blogService.create(newBlogObj).then((returnedBlog) => {\r\n      setBlogs(blogs.concat(returnedBlog).sort((a, b) => b.likes - a.likes))\r\n      setErrorState('success')\r\n      setMessage(`A new Blog ${returnedBlog.title} was added by ${returnedBlog.author}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n        setErrorState('success')\r\n      }, 5000)\r\n    })\r\n  }\r\n\r\n  if (user == null) {\r\n    return (\r\n      <>\r\n        <Notification message={message} errorState={errorState} />\r\n        <h2>Log in to application</h2>\r\n        <form onSubmit={handleLogin}>\r\n          <div>\r\n            username<input type=\"text\" value={username} id=\"username\" name=\"Username\" onChange={({ target }) => setUsername(target.value)} />\r\n          </div>\r\n          <div>\r\n            password<input type=\"password\" value={password} id=\"password\" name=\"Password\" onChange={({ target }) => setPassword(target.value)} />\r\n          </div>\r\n          <button type=\"submit\" id=\"login-button\">login</button>\r\n        </form>\r\n\r\n      </>\r\n    )\r\n  } else {\r\n    return (\r\n      <>\r\n        <h2>blogs</h2>\r\n        <div>{user.name} is logged in</div>\r\n        <button onClick={logout}>logout</button>\r\n        <Notification message={message} errorState={errorState} />\r\n        <br />\r\n        <Togglable buttonLabel=\"new blog\">\r\n          <NewNote createBlog={createBlog} />\r\n        </Togglable>\r\n        {blogs.map(blog =>\r\n          <Blog key={blog.id} blog={blog} blogs={blogs} setBlogs={setBlogs} />\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}